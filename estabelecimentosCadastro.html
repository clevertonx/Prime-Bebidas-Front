<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="./src/css/base.css" />
    <script type="module" src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="./src/js/estabelecimento/estabelecimento.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.6/jquery.inputmask.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.maskedinput/1.4.1/jquery.maskedinput.js" type="text/javascript" defer></script>


    <title>Cadastro de Estabelecimento - Prime Bebidas</title>
</head>
<header class="cabecalho">
    <nav class="nav-bar">
        <div id="link-cabecalho-logado">
            <h1>Prime Bebidas</h1>
        </div>
        <div class="nav">
            <ul>
                <li><a href="./logado.html#section-home">Home</a></li>
                <li>
                    <a href="./produtos.html">Meus Produtos</a>
                </li>
                <li>
                    <a href="./estabelecimentos.html">Meus Estabelecimentos</a>
                </li>
                <li>
                    <a>Minhas Informações</a>
                    <ul id="lista-categorias">
                        <li><a href="./editarPerfil.html">Editar senha</a></li>
                    </ul>
                </li>
                <li><a id="logout" href="./login.html">Logout</a></li>
            </ul>
        </div>
    </nav>
    <div class="linha-amarela"></div>
</header>

<body>

    <div>
        <div class="titulo-section">
            <h3>Cadastro de Estabelecimento</h3>
        </div>

        <form id="form-estabelecimento" method="post" action="http://localhost:8080/estabelecimento"
            class="formulario-estabelecimento">
            <label for="nome">Nome:</label>
            <input type="text" name="nome" id="nome" placeholder="Nome do estabelecimento" required autofocus>

            <label for="telefone">Telefone:</label>
            <input type="text" name="telefone" id="telefone" placeholder="(__) _____-____" required>

            <label for="horarioAtendimento">Horário de Atendimento:</label>
            <input type="text" name="horarioAtendimento" id="horarioAtendimento" placeholder="__:__ ás __:__" required>

            <label for="cep">Cep:</label>
            <input type="text" id="cep" maxlength="9" placeholder="13483-000" autofocus="">

            <label for="numero">Número:</label>
            <input type="text" name="numero" id="numero" placeholder="Número do estabelecimento" required>

            <label for="cidade">Cidade:</label>
            <input type="text" name="cidade" id="cidade" placeholder="Cidade" required>

            <label for="logradouro">Logradouro:</label>
            <input type="text" name="logradouro" id="logradouro" placeholder="Endereço" required>

            <label for="logradouro">Bairro:</label>
            <input type="text" name="bairro" id="bairro" placeholder="Bairro" required>

            <label for="estado">Estado:</label>
            <input type="text" name="estado" id="estado" placeholder="Sigla do estado" required>

            <label for="cnpj">CNPJ:</label>
            <input type="text" name="cnpj" id="cnpj" placeholder="99.999.999/9999-99" required>

            <button id="botao-estabelecimento" type="submit">Cadastrar</button>
        </form>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var redirecionaHome = document.getElementById("link-cabecalho-logado");

            redirecionaHome.addEventListener("click", function () {

                window.location.href = "./logado.html";
            });
        });
    </script>
    <script>


        $(document).ready(function () {

            $("#cep").mask("99999-999", {
                completed: function () {
                    var cep = $(this).val().replace(/[^0-9]/, "");

                    // Validação do CEP; caso o CEP não possua 8 números, então cancela
                    // a consulta
                    if (cep.length != 8) {
                        return false;
                    }

                    // A url de pesquisa consiste no endereço do webservice + o cep que
                    // o usuário informou + o tipo de retorno desejado (entre "json",
                    // "jsonp", "xml", "piped" ou "querty")
                    var url = "https://viacep.com.br/ws/" + cep + "/json/";

                    $.getJSON(url, function (dadosRetorno) {
                        try {
                            // Preenche os campos de acordo com o retorno da pesquisa
                            $("#logradouro").val(dadosRetorno.logradouro);
                            $("#bairro").val(dadosRetorno.bairro);
                            $("#cidade").val(dadosRetorno.localidade);
                            $("#estado").val(dadosRetorno.uf);
                            $("#nr_end").focus();
                        } catch (ex) { }
                    });
                }
            });

        });



    </script>

</body>

<footer id="rodape-login">
    <div>
        <h6>Prime Bebidas</h6>
        <p>Copyright © 2023 All rights reserved</p>
    </div>
</footer>